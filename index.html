<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz: Potencial de Faturamento</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --main-purple: #7F00FF;
            --dark-purple: #4c0099;
            --background-color: #0a0a0a;
            --text-color: #f0f0f0;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: 16px;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            text-align: center;
            padding: 10px;
        }

        .quiz-container {
            width: 100%;
            max-width: 650px;
            margin: 20px;
            position: relative;
        }

        .screen {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            min-height: 500px;
            padding: 20px;
            animation: fadeIn 0.7s ease-in-out;
        }

        .screen.active {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        h1, h2 {
            font-weight: 700;
            margin-bottom: 15px;
        }

        h1 {
            font-size: clamp(1.8rem, 5vw, 2.2rem);
            color: var(--main-purple);
        }

        h2 {
           font-size: clamp(1.3rem, 4vw, 1.5rem);
           margin-bottom: 25px;
        }

        p, h3 {
            font-size: clamp(1rem, 2.5vw, 1.1rem);
            color: #ccc;
            margin-bottom: 30px;
            max-width: 500px;
        }

        .input-group {
            width: 100%;
            max-width: 350px;
            margin-bottom: 20px;
        }

        input[type="tel"] {
            width: 100%;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid var(--main-purple);
            background-color: #1a1a1a;
            color: var(--text-color);
            font-size: 1.1rem;
            text-align: center;
            outline: none;
            transition: box-shadow 0.3s;
        }

        input[type="tel"]::placeholder {
            color: #888;
        }

        input[type="tel"]:focus {
            box-shadow: 0 0 15px var(--main-purple);
        }

        .btn {
            padding: 15px 30px;
            border-radius: 8px;
            border: 2px solid var(--main-purple);
            background-color: transparent;
            color: var(--text-color);
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            max-width: 350px;
            margin-top: 10px;
        }

        .btn-primary {
            background-color: var(--main-purple);
            color: #fff;
            border-color: var(--main-purple);
        }

        .btn:hover {
            transform: translateY(-3px);
            background-color: var(--dark-purple);
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            width: 100%;
        }

        .option-btn {
            padding: 20px;
            background-color: #1a1a1a;
            border: 2px solid var(--dark-purple);
            text-align: left;
            height: 100%;
            display: flex;
            align-items: center;
        }
        
        .option-btn.selected {
            background-color: var(--dark-purple);
            border-color: var(--main-purple);
            transform: scale(1.02);
        }

        .progress-bar-container {
            width: 100%;
            height: 10px;
            background-color: #1a1a1a;
            border-radius: 5px;
            margin-bottom: 30px;
            border: 1px solid var(--dark-purple);
        }

        .progress-bar {
            width: 0%;
            height: 100%;
            background-color: var(--main-purple);
            border-radius: 5px;
            transition: width 0.5s ease-in-out;
        }
        
        .navigation {
            position: absolute;
            bottom: 20px;
            left: 20px;
        }

        .back-btn {
            background: none;
            border: none;
            color: #888;
            cursor: pointer;
            font-size: 1rem;
        }
        .back-btn:hover {
            color: var(--text-color);
        }

        /* --- Estilos da Tela de Resultado --- */
        .result-steps-container {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            width: 100%;
            margin-bottom: 30px;
        }
        .result-step {
            background-color: #1a1a1a;
            border: 1px solid var(--dark-purple);
            border-radius: 8px;
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .result-step .emoji {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        .result-step h4 {
            color: var(--main-purple);
            font-size: 1.2rem;
            margin-bottom: 10px;
        }
        .result-step p {
            font-size: 0.9rem;
            color: #ccc;
            margin-bottom: 0;
        }
        #result-screen h3 {
            color: var(--text-color);
            font-weight: 600;
        }
        #result-screen p {
            margin-bottom: 20px;
        }
        
        .whatsapp-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
        }

        .whatsapp-icon {
            width: 24px;
            height: 24px;
            margin-right: 10px;
        }

        /* Anima√ß√£o de Carregamento */
        .loader p {
            color: var(--text-color);
            margin-bottom: 10px;
            opacity: 0;
            animation: fadeInOut 2s infinite;
        }
        .loader p:nth-child(1) { animation-delay: 0s; }
        .loader p:nth-child(2) { animation-delay: 2s; }
        .loader p:nth-child(3) { animation-delay: 4s; }

        @keyframes fadeInOut {
            0%, 100% { opacity: 0; }
            50% { opacity: 1; }
        }

        #error-message {
            color: #ff4d4d;
            margin-top: 10px;
            height: 20px;
            visibility: hidden;
        }
        
        /* Responsividade para Mobile */
        @media (max-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr; /* Coluna √∫nica em telas menores */
            }
            .result-steps-container {
                flex-direction: column; /* Empilha as etapas em telas menores */
            }
        }

    </style>
</head>
<body>

    <div class="quiz-container">
        <!-- Tela de In√≠cio -->
        <div id="start-screen" class="screen active">
            <h1>Qual √© o POTENCIAL OCULTO üöÄ de faturamento da sua empresa?</h1>
            <h3>Descubra em 6 perguntas o que pode estar travando seu crescimento e qual a chave para destravar um novo patamar de vendas. üí°</h3>
            <div class="input-group">
                <input type="tel" id="phone" placeholder="Seu melhor WhatsApp com DDD" required>
                <p id="error-message">Por favor, insira um telefone v√°lido.</p>
            </div>
            <button id="start-btn" class="btn btn-primary">COME√áAR O DIAGN√ìSTICO</button>
        </div>

        <!-- Tela do Quiz -->
        <div id="quiz-screen" class="screen">
            <div class="progress-bar-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
            <h2 id="question-title"></h2>
            <div id="options-grid" class="options-grid"></div>
            <div class="navigation">
                <button id="back-btn" class="back-btn">‚Üê Voltar</button>
            </div>
        </div>
        
        <!-- Tela de Carregamento -->
        <div id="loading-screen" class="screen">
            <div class="loader">
                <p>Analisando suas respostas... üìä</p>
                <p>Calculando seu potencial de crescimento... üìà</p>
                <p>Revelando a sua chave para o pr√≥ximo n√≠vel... üîë</p>
            </div>
        </div>

        <!-- Tela de Resultado -->
        <div id="result-screen" class="screen">
            <h1 id="result-title">Seu Diagn√≥stico est√° Pronto</h1>
            <p>Com base nas suas respostas, aqui est√° o caminho de 3 etapas para escalar seu faturamento.</p>

            <div class="result-steps-container">
                <div id="result-step-1" class="result-step">
                    <div class="emoji">üîç</div>
                    <h4>Etapa 1: O Gargalo</h4>
                    <p id="bottleneck-text">Identificamos o ponto exato que limita seu crescimento e a previsibilidade do seu faturamento hoje.</p>
                </div>
                <div class="result-step">
                    <div class="emoji">‚öôÔ∏è</div>
                    <h4>Etapa 2: A M√°quina de Vendas</h4>
                    <p>Voc√™ precisa de uma <strong>M√°quina de Vendas</strong>. Um sistema que atrai, converte e escala seu faturamento no piloto autom√°tico, sem depender de sorte ou indica√ß√µes.</p>
                </div>
                <div class="result-step">
                    <div class="emoji">‚ö°Ô∏è</div>
                    <h4>Etapa 3: Ativa√ß√£o Imediata</h4>
                    <p>Na nossa sess√£o estrat√©gica, voc√™ recebe o plano de a√ß√£o exato para ativar sua M√°quina de Vendas com a <strong>Estrat√©gia I3</strong>. Sem rodeios, direto ao ponto.</p>
                </div>
            </div>

            <h3>Chega de esperar. √â hora de agir.</h3>
            <p>Toque no bot√£o abaixo e agende sua <strong>consultoria estrat√©gica gratuita</strong> para implementar seu plano de crescimento agora mesmo.</p>
            <a href="https://api.whatsapp.com/send?phone=5521920194389&text=Ol%C3%A1!%20Fiz%20o%20quiz%20e%20quero%20saber%20mais%20sobre%20a%20estrat%C3%A9gia%20I3%20para%20aumentar%20meu%20faturamento." target="_blank" id="whatsapp-btn" class="btn btn-primary whatsapp-btn">
                <svg class="whatsapp-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" fill="white"><path d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.8 0-67.6-9.5-97.2-27.2l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"/></svg>
                AGENDAR CONSULTORIA GR√ÅTIS ‚úÖ
            </a>
        </div>
    </div>

    <script>
        // --- CONFIGURA√á√ÉO DO QUIZ ---
        const webhookUrl = 'https://igor-n8n.7hn4wr.easypanel.host/webhook/720183c6-fd87-4c3c-ab7e-f2127ebf1b8e';
        
        const quizData = [
            {
                question: "1/6. Como √© a entrada de novos clientes no seu neg√≥cio hoje? ü§î",
                options: {
                    A: "Um fluxo constante e previs√≠vel.",
                    B: "Varia muito, com picos e vales.",
                    C: "Principalmente por indica√ß√£o.",
                    D: "Lenta, gostaria de mais clientes."
                }
            },
            {
                question: "2/6. Qual seu maior DESAFIO de faturamento atualmente? üò´",
                options: {
                    A: "Atrair clientes qualificados.",
                    B: "Falta de tempo para estrat√©gias.",
                    C: "Depender de poucas fontes de clientes.",
                    D: "Concorr√™ncia muito forte."
                }
            },
            {
                question: "3/6. Se seu faturamento dobrasse, qual seria o maior IMPACTO? üí∞",
                options: {
                    A: "Lucro para reinvestir e expandir.",
                    B: "Contratar mais e melhorar a estrutura.",
                    C: "Mais seguran√ßa e tranquilidade.",
                    D: "Consolidar a marca como l√≠der."
                }
            },
            {
                question: "4/6. Sobre o futuro da sua empresa, qual frase te representa MAIS? üó∫Ô∏è",
                options: {
                    A: "Tenho um plano, s√≥ preciso acelerar.",
                    B: "Sei ONDE ir, mas n√£o sei COMO.",
                    C: "Estou apagando inc√™ndios.",
                    D: "Sinto que estou estagnado."
                }
            },
            {
                question: "5/6. Qu√£o preparado voc√™ est√° para o DOBRO de clientes? üí™",
                options: {
                    A: "Totalmente preparado, pode mandar!",
                    B: "Me adaptaria, √© um problema bom.",
                    C: "Precisaria de alguns ajustes.",
                    D: "N√£o estou preparado."
                }
            },
            {
                question: "6/6. O que voc√™ mais busca em uma solu√ß√£o de crescimento? üéØ",
                options: {
                    A: "Resultados r√°pidos e comprovados.",
                    B: "Uma parceria com um especialista.",
                    C: "Inova√ß√£o, algo diferente.",
                    D: "Seguran√ßa e previsibilidade."
                }
            }
        ];

        // --- ELEMENTOS DO DOM ---
        const screens = document.querySelectorAll('.screen');
        const startBtn = document.getElementById('start-btn');
        const phoneInput = document.getElementById('phone');
        const errorMessage = document.getElementById('error-message');

        const quizScreen = document.getElementById('quiz-screen');
        const questionTitle = document.getElementById('question-title');
        const optionsGrid = document.getElementById('options-grid');
        const progressBar = document.getElementById('progress-bar');
        const backBtn = document.getElementById('back-btn');

        const loadingScreen = document.getElementById('loading-screen');
        const resultScreen = document.getElementById('result-screen');
        const resultTitle = document.getElementById('result-title');
        const bottleneckText = document.getElementById('bottleneck-text');

        // --- ESTADO DO QUIZ ---
        let currentQuestionIndex = 0;
        let userAnswers = {};
        let userPhone = '';
        let finalDiagnosis = '';
        let finalDiagnosisTitle = '';

        // --- FUN√á√ïES ---

        function showScreen(screenId) {
            screens.forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }

        function validatePhone(phone) {
            const phoneRegex = /^[0-9]{10,11}$/;
            return phoneRegex.test(phone.replace(/\D/g, ''));
        }

        function startQuiz() {
            const phoneValue = phoneInput.value;
            if (validatePhone(phoneValue)) {
                userPhone = phoneValue;
                errorMessage.style.visibility = 'hidden';
                showScreen('quiz-screen');
                displayQuestion(currentQuestionIndex);
            } else {
                errorMessage.style.visibility = 'visible';
            }
        }

        function displayQuestion(index) {
            if (index < 0) {
                currentQuestionIndex = 0;
                showScreen('start-screen');
                return;
            }
            if (index >= quizData.length) {
                finishQuiz();
                return;
            }

            currentQuestionIndex = index;
            const questionData = quizData[index];
            questionTitle.innerHTML = questionData.question;
            optionsGrid.innerHTML = '';

            for (const key in questionData.options) {
                const option = questionData.options[key];
                const button = document.createElement('button');
                button.classList.add('btn', 'option-btn');
                button.dataset.answer = key;
                button.innerHTML = `<strong>${key})</strong> ${option}`;
                
                if (userAnswers[`pergunta${index + 1}`] === key) {
                    button.classList.add('selected');
                }

                button.addEventListener('click', () => selectOption(key));
                optionsGrid.appendChild(button);
            }
            updateProgressBar();
        }

        function selectOption(answer) {
            userAnswers[`pergunta${currentQuestionIndex + 1}`] = answer;
            
            const buttons = optionsGrid.querySelectorAll('.option-btn');
            buttons.forEach(btn => btn.classList.remove('selected'));
            event.target.closest('.option-btn').classList.add('selected');

            setTimeout(() => {
                displayQuestion(currentQuestionIndex + 1);
            }, 400);
        }

        function updateProgressBar() {
            const progress = ((currentQuestionIndex) / quizData.length) * 100;
            progressBar.style.width = `${progress}%`;
        }

        function generateDynamicResults() {
            const answerQ2 = userAnswers['pergunta2'];
            let bottleneckMsg = '';
            let titleMsg = 'Sua Matriz de Tra√ß√£o Exponencial'; // T√≠tulo padr√£o

            switch (answerQ2) {
                case 'A':
                    titleMsg = "Seu Gargalo: Atra√ß√£o de Clientes";
                    bottleneckMsg = "Seu principal gargalo √© a <strong>Atra√ß√£o de Clientes Qualificados</strong>. Voc√™ gasta tempo e energia com leads que n√£o compram, em vez de focar apenas nos clientes ideais.";
                    break;
                case 'B':
                    titleMsg = "Seu Gargalo: Falta de Sistema";
                    bottleneckMsg = "Seu principal gargalo √© a <strong>Falta de um Sistema</strong>. Voc√™ est√° preso no operacional, e sem um processo claro de vendas, o crescimento fica travado.";
                    break;
                case 'C':
                    titleMsg = "Seu Gargalo: Depend√™ncia de Canais";
                    bottleneckMsg = "Seu principal gargalo √© a <strong>Depend√™ncia de Canais</strong>. Seu faturamento est√° em risco por depender de indica√ß√µes ou de uma √∫nica fonte de clientes.";
                    break;
                case 'D':
                    titleMsg = "Seu Gargalo: Falta de Posicionamento";
                    bottleneckMsg = "Seu principal gargalo √© a <strong>Falta de Posicionamento</strong>. No meio de tantos concorrentes, sua empresa n√£o se destaca e voc√™ precisa de uma oferta irresist√≠vel.";
                    break;
                default:
                    bottleneckMsg = "Identificamos que h√° um gargalo claro na sua opera√ß√£o que est√° impedindo um crescimento mais acelerado e previs√≠vel.";
            }
            bottleneckText.innerHTML = bottleneckMsg;
            resultTitle.textContent = titleMsg;
            finalDiagnosis = bottleneckMsg;
            finalDiagnosisTitle = titleMsg;
        }
        
        async function finishQuiz() {
            progressBar.style.width = '100%';
            generateDynamicResults();
            showScreen('loading-screen');
            
            try {
                await sendDataToWebhook();
            } catch (error) {
                console.error('Erro ao enviar dados para o webhook:', error);
            }
            
            setTimeout(() => {
                showScreen('result-screen');
            }, 6000);
        }

        async function sendDataToWebhook() {
            const resumoQuiz = {};
            for (const key in userAnswers) {
                const questionIndex = parseInt(key.replace('pergunta', '')) - 1;
                const questionText = quizData[questionIndex].question;
                const answerKey = userAnswers[key];
                const answerText = quizData[questionIndex].options[answerKey];
                resumoQuiz[questionText] = answerText;
            }

            const payload = {
                telefone: userPhone,
                respostas_completas: resumoQuiz,
                diagnostico_titulo: finalDiagnosisTitle,
                diagnostico_texto: finalDiagnosis
            };

            await fetch(webhookUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(payload)
            });
        }

        // --- EVENT LISTENERS ---
        startBtn.addEventListener('click', startQuiz);
        phoneInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                startQuiz();
            }
        });
        
        backBtn.addEventListener('click', () => {
            displayQuestion(currentQuestionIndex - 1);
        });

    </script>
</body>
</html>
